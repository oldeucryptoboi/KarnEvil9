<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hello World with Claude Code — KarnEvil9 Tutorial</title>

  <!-- Authorship -->
  <meta name="author" content="Laurent DeSegur">

  <!-- SEO -->
  <meta name="description" content="Step-by-step tutorial: delegate a coding task to Claude Code from KarnEvil9's deterministic agent runtime. Covers plugin architecture, journal event streaming, and permission gates.">
  <meta name="keywords" content="KarnEvil9, Claude Code, agent delegation, Anthropic SDK, agentic runtime, plugin system, hello world tutorial, LLM tool use, Claude agent SDK, agent orchestration">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
  <link rel="canonical" href="https://oldeucryptoboi.github.io/KarnEvil9/claude-code-hello-world.html">

  <!-- Open Graph / Social -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="Hello World with Claude Code — KarnEvil9 Tutorial">
  <meta property="og:description" content="Delegate coding tasks to Claude Code from a deterministic agent runtime. Full walkthrough from plugin registration to file creation.">
  <meta property="og:site_name" content="KarnEvil9 Project">
  <meta property="article:author" content="Laurent DeSegur">
  <meta property="article:published_time" content="2026-02-12">
  <meta property="article:section" content="Tutorial">
  <meta property="article:tag" content="Claude Code">
  <meta property="article:tag" content="Agent Delegation">
  <meta property="article:tag" content="KarnEvil9">
  <meta property="article:tag" content="Plugin System">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Hello World with Claude Code — KarnEvil9 Tutorial">
  <meta name="twitter:description" content="KarnEvil9 delegates a coding task to Claude Code. Full walkthrough with journal events, permission gates, and plugin architecture.">

  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "Hello World with Claude Code — KarnEvil9 Tutorial",
    "alternativeHeadline": "Delegating coding tasks to Claude Code from a deterministic agent runtime",
    "author": {
      "@type": "Person",
      "name": "Laurent DeSegur"
    },
    "datePublished": "2026-02-12",
    "description": "Step-by-step tutorial showing how KarnEvil9's Claude Code plugin delegates a coding task to Claude Code via the Anthropic agent SDK, with full journal event streaming, permission gates, and graceful degradation.",
    "keywords": ["Claude Code", "KarnEvil9", "agent delegation", "plugin system", "Anthropic SDK", "agentic runtime"],
    "about": [
      {"@type": "Thing", "name": "Agent Orchestration"},
      {"@type": "Thing", "name": "Large Language Models"},
      {"@type": "Thing", "name": "Plugin Architecture"}
    ],
    "isPartOf": {
      "@type": "SoftwareSourceCode",
      "name": "KarnEvil9",
      "codeRepository": "https://github.com/oldeucryptoboi/KarnEvil9"
    },
    "proficiencyLevel": "Beginner"
  }
  </script>

  <style>
    :root{
      --bg:#ffffff;
      --fg:#111827;
      --muted:#4b5563;
      --border:#e5e7eb;
      --codebg:#0b1020;
      --codefg:#e5e7eb;
      --accent:#2563eb;
      --callout:#f3f4f6;
      --warn:#fff7ed;
      --warnborder:#fed7aa;
      --good:#ecfdf5;
      --goodborder:#a7f3d0;
      --bad:#fef2f2;
      --badborder:#fecaca;
    }
    html,body{background:var(--bg); color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; line-height:1.55; margin:0;}
    main{max-width: 980px; margin: 0 auto; padding: 28px 18px 80px;}
    h1,h2,h3{line-height:1.25; margin: 1.2em 0 0.5em;}
    h1{font-size: 2.05rem; margin-top: 0.2em;}
    h2{font-size: 1.55rem; padding-top: 0.6em; border-top: 1px solid var(--border);}
    h3{font-size: 1.18rem;}
    p{margin: 0.6em 0;}
    a{color:var(--accent); text-decoration: none;}
    a:hover{text-decoration: underline;}
    .meta{color:var(--muted); margin-top: 6px;}
    .author{font-size: 1.1rem; font-weight: 500; margin-top: 10px;}
    .badge{display:inline-block; padding: 2px 10px; border:1px solid var(--border); border-radius: 999px; font-size: 0.9rem; color: var(--muted);}
    .callout{background: var(--callout); border:1px solid var(--border); border-radius: 12px; padding: 14px 14px; margin: 16px 0;}
    .callout.warn{background: var(--warn); border-color: var(--warnborder);}
    .callout.good{background: var(--good); border-color: var(--goodborder);}
    .callout.bad{background: var(--bad); border-color: var(--badborder);}
    .toc{border:1px solid var(--border); border-radius: 12px; padding: 14px 14px; background: #fafafa;}
    .toc ol{margin: 8px 0 0 18px;}
    .toc li{margin: 6px 0;}
    table{width:100%; border-collapse: collapse; margin: 12px 0;}
    th,td{border:1px solid var(--border); padding: 10px 10px; vertical-align: top;}
    th{background:#fafafa; text-align:left;}
    .small{font-size: 0.95rem; color: var(--muted);}
    .kpi{display:flex; gap:12px; flex-wrap: wrap; margin: 10px 0 0;}
    .kpi .card{flex:1 1 220px; border:1px solid var(--border); border-radius: 12px; padding: 12px 12px; background:#fff;}
    .kpi .label{font-size: 0.9rem; color: var(--muted);}
    .kpi .value{font-size: 1.35rem; font-weight: 700; margin-top: 2px;}
    code, pre{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;}
    code{background: var(--callout); padding: 2px 6px; border-radius: 4px; font-size: 0.92em;}
    pre{background: var(--codebg); color: var(--codefg); padding: 14px; border-radius: 12px; overflow:auto; border: 1px solid #111827;}
    pre code{background: transparent; padding: 0; border-radius: 0;}
    .pill{display:inline-block; padding: 2px 8px; border:1px solid var(--border); border-radius: 999px; font-size: 0.85rem; color: var(--muted); margin-left: 6px;}
    .step-num{display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border-radius:50%; background:var(--fg); color:#fff; font-weight:700; font-size:0.9rem; margin-right:8px; flex-shrink:0;}
    .step-row{display:flex; align-items:flex-start; margin:14px 0;}
    .step-row p{margin:0;}
    .flow-diagram{background: var(--callout); border:1px solid var(--border); border-radius: 12px; padding: 18px; margin: 16px 0; overflow-x: auto;}
    .gh-footer{text-align:center; margin-top: 3rem; padding: 2rem 0; border-top: 1px solid var(--border);}
    .gh-footer a{font-weight: 600; font-size: 1.1rem;}
    .gh-footer .gh-desc{font-size: 0.9rem; color: var(--muted); margin-top: 6px;}
    .gh-footer .gh-desc a{font-weight: normal; font-size: inherit;}
  </style>
</head>

<body>
<main>
  <header>
    <div class="badge">Tutorial</div>
    <h1>Hello World with Claude Code</h1>
    <p class="meta">
      Delegate a coding task from KarnEvil9 to Claude Code &mdash; full walkthrough from plugin registration to file creation.
    </p>
    <div class="author">Laurent DeSegur</div>
    <p class="small">February 2026 &middot; KarnEvil9 Project</p>

    <div class="kpi">
      <div class="card">
        <div class="label">Task</div>
        <div class="value">Create hello.ts</div>
        <div class="small">TypeScript file that prints Hello World</div>
      </div>
      <div class="card">
        <div class="label">Execution time</div>
        <div class="value">~16 seconds</div>
        <div class="small">Including planning + agent execution</div>
      </div>
      <div class="card">
        <div class="label">Token cost</div>
        <div class="value">~10,400 tokens</div>
        <div class="small">10,004 in / 438 out</div>
      </div>
    </div>

    <nav class="toc" aria-label="Table of contents">
      <strong>Contents</strong>
      <ol>
        <li><a href="#overview">What this demonstrates</a></li>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#verify">Verify the plugin loads</a></li>
        <li><a href="#run">Run the hello world task</a></li>
        <li><a href="#execution-flow">What happens under the hood</a></li>
        <li><a href="#output">Full output</a></li>
        <li><a href="#architecture">Plugin architecture</a></li>
        <li><a href="#config">Configuration reference</a></li>
        <li><a href="#degradation">Graceful degradation</a></li>
        <li><a href="#api-mode">API server mode</a></li>
      </ol>
    </nav>
  </header>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 1. OVERVIEW                                                    -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="overview">
    <h2>1. What this demonstrates</h2>
    <p>
      KarnEvil9 is a deterministic agent runtime. It converts natural-language tasks into structured execution plans,
      runs each step under permission control, and records every event in a tamper-evident journal.
    </p>
    <p>
      The <strong>Claude Code plugin</strong> extends this system by registering a new tool: <code>claude-code</code>.
      When the planner generates a step that uses this tool, KarnEvil9 spawns an autonomous Claude Code session
      via the <a href="https://www.npmjs.com/package/@anthropic-ai/claude-agent-sdk">Anthropic agent SDK</a>,
      streams progress as journal events, and captures the result.
    </p>
    <p>
      This tutorial walks through the simplest possible case: asking KarnEvil9 to create a TypeScript file
      that prints &ldquo;Hello World&rdquo;.
    </p>

    <div class="callout good">
      <strong>Why delegate to Claude Code?</strong>
      Claude Code runs with full file system access and its own tool loop.
      For coding tasks that require reading, writing, and testing files, it can
      autonomously iterate until the task is done &mdash; while KarnEvil9 manages
      permissions, journal integrity, and session lifecycle around it.
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 2. PREREQUISITES                                               -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="prerequisites">
    <h2>2. Prerequisites</h2>
    <ul>
      <li><strong>Node.js 20+</strong> and <strong>pnpm 9.15+</strong></li>
      <li>A built KarnEvil9 monorepo</li>
      <li>An <code>ANTHROPIC_API_KEY</code> exported in your environment</li>
    </ul>
    <pre><code>pnpm install
pnpm build
export ANTHROPIC_API_KEY=sk-ant-...</code></pre>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 3. VERIFY                                                      -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="verify">
    <h2>3. Verify the plugin loads</h2>
    <pre><code>karnevil9 plugins list</code></pre>
    <p>Look for:</p>
    <pre><code>claude-code v1.0.0 [active]
  Delegates coding tasks to Claude Code via the Anthropic agent SDK
  Provides: tools: claude-code; hooks: before_plan, before_tool_call,
            after_session_end; routes: status; services: claude-code-agent</code></pre>
    <p class="small">
      If <code>ANTHROPIC_API_KEY</code> is not set, the plugin still loads but registers stubs (graceful degradation).
      The status route will report <code>{ "available": false }</code>.
    </p>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 4. RUN                                                         -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="run">
    <h2>4. Run the hello world task</h2>
    <pre><code>karnevil9 run \
  "use the claude-code tool to create hello.ts that prints hello world" \
  --planner claude --mode real --agentic</code></pre>

    <p>
      When prompted for permission, choose <code>[a]llow once</code> to grant the
      <code>agent:execute:claude_code</code> permission for this step.
    </p>

    <p>After ~16 seconds, verify the result:</p>
    <pre><code>$ npx tsx hello.ts
Hello World</code></pre>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 5. EXECUTION FLOW                                              -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="execution-flow">
    <h2>5. What happens under the hood</h2>

    <p>Six phases, from task submission to session completion:</p>

    <div class="step-row">
      <span class="step-num">1</span>
      <div>
        <p><strong>Plugin registration</strong> &mdash; On startup, the plugin system discovers <code>plugins/claude-code/plugin.yaml</code>,
        loads <code>index.js</code>, and calls <code>register(api)</code>. The plugin registers the <code>claude-code</code> tool,
        three hooks (<code>before_plan</code>, <code>before_tool_call</code>, <code>after_session_end</code>),
        a status route, and a service.</p>
      </div>
    </div>

    <div class="step-row">
      <span class="step-num">2</span>
      <div>
        <p><strong>Planning with context injection</strong> &mdash; The kernel fires the <code>before_plan</code> hook.
        The Claude Code plugin returns <code>{ action: "modify", data: { claude_code_context: { available: true, hint: "..." } } }</code>.
        This data is merged into the planner snapshot, so the Claude planner knows the <code>claude-code</code> tool exists
        and generates a plan that uses it.</p>
      </div>
    </div>

    <div class="step-row">
      <span class="step-num">3</span>
      <div>
        <p><strong>Permission gate</strong> &mdash; Before executing the step, the permission engine checks
        <code>agent:execute:claude_code</code>. In CLI mode, the user is prompted interactively.
        In API server mode, an approval request is pushed via WebSocket.</p>
      </div>
    </div>

    <div class="step-row">
      <span class="step-num">4</span>
      <div>
        <p><strong>Agent execution</strong> &mdash; The <code>before_tool_call</code> hook injects
        <code>_session_id</code> and <code>_invocation_id</code> into the tool input.
        The handler spawns a Claude Code session via <code>query()</code> from the Anthropic agent SDK,
        running with <code>permissionMode: "bypassPermissions"</code> (KarnEvil9 handles permissions at its own layer).
        Progress streams as throttled journal events.</p>
      </div>
    </div>

    <div class="step-row">
      <span class="step-num">5</span>
      <div>
        <p><strong>Result capture</strong> &mdash; When the agent completes, the handler returns a structured result
        including status, the agent's text response, duration, token usage, and message count.
        The kernel records this as a <code>step.succeeded</code> journal event.</p>
      </div>
    </div>

    <div class="step-row">
      <span class="step-num">6</span>
      <div>
        <p><strong>Agentic re-plan</strong> &mdash; In agentic mode, the kernel loops back to the planner.
        The planner sees the task is complete and returns an empty plan, ending the session.
        Active memory extracts a lesson for future sessions.</p>
      </div>
    </div>

    <div class="flow-diagram">
<pre style="margin:0; background:transparent; border:none; color:var(--fg); font-size: 0.92rem;"><code>Kernel
  |
  |-- before_plan hook -----> Claude Code plugin injects context
  |                           { claude_code_context: { available: true } }
  |
  |-- Planner (Claude) -----> Generates plan: [ step: claude-code tool ]
  |
  |-- Permission gate ------> agent:execute:claude_code -> allow_once
  |
  |-- before_tool_call -----> Injects _session_id, _invocation_id
  |
  |-- Tool handler ----------> query() via @anthropic-ai/claude-agent-sdk
  |     |-- agent.started           journal event
  |     |-- agent.progress          journal event (throttled, max 1/2s)
  |     |-- agent.progress          journal event
  |     |-- agent.completed         journal event (15596ms)
  |     '-- returns structured result
  |
  |-- step.succeeded -------> Result recorded in journal
  |
  |-- Re-plan (agentic) ----> Empty plan -> session.completed
  |
  '-- memory.lesson_extracted</code></pre>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 6. OUTPUT                                                      -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="output">
    <h2>6. Full output</h2>
    <p>
      This is the actual output from running the hello world task on February 12, 2026:
    </p>
    <pre><code>KarnEvil9 session starting...
Task: use the claude-code tool to create hello.ts that prints hello world
Mode: real
Tools: browser, http-request, read-file, shell-exec, write-file,
       claude-code, openai-codex, send-slack-message,
       swarm-distribute, swarm-peers
Plugins: claude-code, example-logger, openai-codex, scheduler-tool,
         slack, swarm

[16:55:03] session.created
[16:55:03] session.started
[16:55:03] planner.requested
[16:55:13] planner.plan_received
[16:55:13] plan.accepted
[16:55:13] step.started
[16:55:13] permission.requested    -- agent:execute:claude_code
[16:55:13] permission.granted
[16:55:13] tool.started
[16:55:13] agent.started
  Agent claude-code started
[16:55:20] agent.progress
[16:55:28] agent.progress
[16:55:29] agent.completed
  Agent claude-code completed (15596ms)
[16:55:29] tool.succeeded
[16:55:29] step.succeeded

--- Output (step-1) ---
{
  "status": "completed",
  "result": "I've created the hello.ts file that prints
             'Hello, World!' to the console...",
  "is_error": false,
  "duration_ms": 15596,
  "messages_count": 6
}
--- End ---

[16:55:37] planner.plan_received   -- empty plan
[16:55:37] session.completed
[16:55:38] memory.lesson_extracted

Session 9b88dd13-56be-4d6e-92dd-1504d3dcec44
Status: completed
Steps completed: 1/1
Tokens: 10,442 (10,004 in / 438 out)</code></pre>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 7. ARCHITECTURE                                                -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="architecture">
    <h2>7. Plugin architecture</h2>

    <h3>File structure</h3>
    <table>
      <thead>
        <tr>
          <th>File</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>plugins/claude-code/plugin.yaml</code></td>
          <td>Manifest declaring tools, hooks, routes, and services</td>
        </tr>
        <tr>
          <td><code>plugins/claude-code/index.js</code></td>
          <td>Registration entry point with graceful degradation</td>
        </tr>
        <tr>
          <td><code>plugins/claude-code/tool.js</code></td>
          <td>Tool manifest, handler factory, and abort management</td>
        </tr>
        <tr>
          <td><code>plugins/claude-code/progress.js</code></td>
          <td>Throttled journal event emitter (max 1 event per 2 seconds)</td>
        </tr>
      </tbody>
    </table>

    <h3>Journal events</h3>
    <p>The plugin emits six event types, all prefixed with <code>agent.</code>:</p>
    <table>
      <thead>
        <tr>
          <th>Event</th>
          <th>When</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>agent.started</code></td><td>Agent session begins</td></tr>
        <tr><td><code>agent.progress</code></td><td>Intermediate output (throttled to 1 per 2s)</td></tr>
        <tr><td><code>agent.tool_call</code></td><td>Agent uses an internal tool (file read, write, etc.)</td></tr>
        <tr><td><code>agent.completed</code></td><td>Agent finishes successfully</td></tr>
        <tr><td><code>agent.failed</code></td><td>Agent encounters an error</td></tr>
        <tr><td><code>agent.aborted</code></td><td>Agent cancelled (session abort or timeout)</td></tr>
      </tbody>
    </table>

    <h3>Hooks</h3>
    <table>
      <thead>
        <tr>
          <th>Hook</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>before_plan</code></td>
          <td>Injects <code>claude_code_context</code> into the planner snapshot so the planner knows the tool is available</td>
        </tr>
        <tr>
          <td><code>before_tool_call</code></td>
          <td>When <code>tool_name === "claude-code"</code>, injects <code>_session_id</code> and <code>_invocation_id</code> into the input</td>
        </tr>
        <tr>
          <td><code>after_session_end</code></td>
          <td>When session status is <code>"aborted"</code>, aborts all active Claude Code agents for that session</td>
        </tr>
      </tbody>
    </table>

    <h3>Tool manifest</h3>
    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Name</td><td><code>claude-code</code></td></tr>
        <tr><td>Runner</td><td><code>internal</code></td></tr>
        <tr><td>Timeout</td><td>600,000 ms (10 minutes)</td></tr>
        <tr><td>Permission</td><td><code>agent:execute:claude_code</code></td></tr>
        <tr><td>Required input</td><td><code>task</code> (string)</td></tr>
        <tr><td>Optional input</td><td><code>cwd</code>, <code>allowed_tools</code>, <code>system_prompt</code>, <code>max_turns</code></td></tr>
      </tbody>
    </table>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 8. CONFIGURATION                                               -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="config">
    <h2>8. Configuration reference</h2>
    <table>
      <thead>
        <tr>
          <th>Environment variable</th>
          <th>Required</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>ANTHROPIC_API_KEY</code></td>
          <td>Yes</td>
          <td>Anthropic API key. Without it, the plugin registers stubs.</td>
        </tr>
        <tr>
          <td><code>KARNEVIL9_CLAUDE_CODE_MODEL</code></td>
          <td>No</td>
          <td>Model override (e.g. <code>claude-sonnet-4-5-20250929</code>). Defaults to the SDK&rsquo;s default model.</td>
        </tr>
        <tr>
          <td><code>KARNEVIL9_CLAUDE_CODE_MAX_TURNS</code></td>
          <td>No</td>
          <td>Maximum agentic turns per invocation. Default: 30.</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 9. GRACEFUL DEGRADATION                                        -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="degradation">
    <h2>9. Graceful degradation</h2>
    <p>
      Without <code>ANTHROPIC_API_KEY</code>, the plugin registers stubs instead of real handlers.
      KarnEvil9 always boots cleanly regardless of which API keys are configured.
    </p>
    <table>
      <thead>
        <tr>
          <th>Component</th>
          <th>With API key</th>
          <th>Without API key</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Tool (<code>claude-code</code>)</td>
          <td>Spawns Claude Code agent</td>
          <td>Returns error in real mode, mock response in mock mode</td>
        </tr>
        <tr>
          <td><code>before_plan</code> hook</td>
          <td>Injects <code>claude_code_context</code></td>
          <td>No-op (<code>{ action: "continue" }</code>)</td>
        </tr>
        <tr>
          <td>Status route</td>
          <td><code>{ "available": true, "model": "...", "active_agents": 0 }</code></td>
          <td><code>{ "available": false, "reason": "ANTHROPIC_API_KEY not set" }</code></td>
        </tr>
        <tr>
          <td>Service health</td>
          <td><code>{ "ok": true }</code></td>
          <td><code>{ "ok": false, "detail": "Not configured" }</code></td>
        </tr>
      </tbody>
    </table>

    <div class="callout">
      <strong>Design pattern:</strong> This follows the same graceful degradation model used by the
      <a href="https://github.com/oldeucryptoboi/KarnEvil9/tree/master/plugins/slack">Slack</a> and
      <a href="https://github.com/oldeucryptoboi/KarnEvil9/tree/master/plugins/swarm">Swarm</a> plugins.
      The plugin always loads, always validates its manifest, and always registers its declared tools and hooks &mdash;
      it just uses stub implementations when the backing service is unavailable.
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- 10. API SERVER MODE                                            -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <section id="api-mode">
    <h2>10. API server mode</h2>
    <p>
      The Claude Code plugin also works via the REST API server:
    </p>

    <pre><code># Start the server
karnevil9 server --planner claude --agentic --insecure

# Check plugin status
curl http://localhost:3100/api/plugins/claude-code/status</code></pre>

    <p>Response:</p>
    <pre><code>{
  "available": true,
  "model": "default",
  "active_agents": 0
}</code></pre>

    <p>
      Submit tasks via <code>POST /api/sessions</code> or WebSocket at <code>ws://localhost:3100/api/ws</code>.
      When the planner decides to use the <code>claude-code</code> tool, agent journal events stream to
      connected SSE and WebSocket clients in real time.
    </p>

    <div class="callout warn">
      <strong>Note:</strong> The <code>--insecure</code> flag disables API token authentication.
      For production deployments, set <code>KARNEVIL9_API_TOKEN</code> and omit <code>--insecure</code>.
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- GITHUB FOOTER                                                  -->
  <!-- ═══════════════════════════════════════════════════════════════ -->
  <div class="gh-footer">
    <a href="https://github.com/oldeucryptoboi/KarnEvil9" target="_blank" rel="noopener">
      github.com/oldeucryptoboi/KarnEvil9
    </a>
    <div class="gh-desc">
      Full source code, plugin system, and documentation &mdash;
      <a href="https://github.com/oldeucryptoboi/KarnEvil9/tree/master/plugins/claude-code" target="_blank" rel="noopener">Claude Code plugin</a> &middot;
      <a href="https://github.com/oldeucryptoboi/KarnEvil9/tree/master/plugins/openai-codex" target="_blank" rel="noopener">OpenAI Codex plugin</a> &middot;
      <a href="https://oldeucryptoboi.github.io/KarnEvil9/memory-vs-rlm.html" target="_blank" rel="noopener">MAL vs RLM paper</a>
    </div>
  </div>

</main>
</body>
</html>
